<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Component Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
    --background-color-light: #f0f0f0;
    --background-color-dark: #1a1a1a;
    --text-color-light: #333;
    --text-color-dark: #ddd;
    --panel-background-color-light: #ffffff;
    --panel-background-color-dark: #2b2b2b;
    --border-color-light: #ccc;
    --border-color-dark: #444;
    --primary-color: #55a630;
    --primary-color-dark: #407f22;
    --accent-color: #ff4081;
    --accent-color-dark: #c2185b;
    --footer-link-color: #55a630;
    --developer-link-color: #0eb0f0;
    --donate-link-color: #ff4081;
    --donate-link-hover-color: #ff7091;
    --shadow-light: 0 8px 20px rgba(0, 0, 0, 0.1);
    --shadow-dark: 0 8px 20px rgba(0, 0, 0, 0.5);
    --transition-speed: 0.3s;
    --sent-message-bg: #55a630;
    --received-message-bg: #4e4e4e;
    --sent-message-text-color: white;
    --received-message-text-color: white;
    --developer-message-bg: #ff4081;
    --developer-message-text-color: white;
    --time-username-spacing: 10px;
    --modal-background-color: rgba(0, 0, 0, 0.6);
    --modal-content-background: var(--panel-background-color);
}

[data-theme="light"] {
    --background-color: var(--background-color-light);
    --text-color: var(--text-color-light);
    --panel-background-color: var(--panel-background-color-light);
    --border-color: var(--border-color-light);
    --shadow: var(--shadow-light);
    --scrollbar-color: #ccc;
    --language-button-color: var(--primary-color);
}

[data-theme="dark"] {
    --background-color: var(--background-color-dark);
    --text-color: var(--text-color-dark);
    --panel-background-color: var(--panel-background-color-dark);
    --border-color: var(--border-color-dark);
    --shadow: var(--shadow-dark);
    --scrollbar-color: #555;
    --language-button-color: var(--primary-color-dark);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--background-color);
    color: var(--text-color);
    transition: background-color var(--transition-speed), color var(--transition-speed);
    line-height: 1.6;
    padding: 20px;
    overflow-x: hidden;
}

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-color);
    border-radius: 4px;
}

header, footer {
    width: 100%;
    background-color: var(--panel-background-color);
    padding: 10px;
    box-shadow: var(--shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: fixed;
    z-index: 1000;
    transition: background-color var(--transition-speed), box-shadow var(--transition-speed), color var(--transition-speed);
}

header {
    top: 0;
    left: 0;
}

footer {
    bottom: 0;
    left: 0;
    color: var(--footer-link-color);
}

header h1, footer p {
    color: var(--primary-color);
}

.header-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

.home-button, .dropdown-button, .button {
    background-color: var(--primary-color);
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    transition: all 0.3s ease;
    height: 41px;
}

.home-button:hover, .dropdown-button:hover, .button:hover {
    background-color: var(--primary-color-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.home-button:active, .dropdown-button:active, .button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: var(--panel-background-color);
    min-width: 160px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    z-index: 1001;
    border-radius: 8px;
    top: 100%;
    left: 0;
}

.dropdown-content a {
    color: var(--text-color);
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    transition: background-color 0.3s ease;
}

.dropdown-content a:hover {
    background-color: var(--primary-color);
    color: white;
}

.dropdown:hover .dropdown-content {
    display: block;
}

#theme-switcher, #language-switcher, #login-btn {
    font-size: 20px;
    cursor: pointer;
    color: var(--primary-color);
    transition: all 0.3s ease;
}

#theme-switcher:hover, #language-switcher:hover, #login-btn:hover {
    transform: scale(1.1);
}

.language-button {
    background-color: transparent;
    border: none;
    outline: none;
    color: var(--language-button-color);
}

.container {
    display: flex;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    padding-top: 70px;
    padding-bottom: 50px;
    gap: 20px;
}

.panel {
    background-color: var(--panel-background-color);
    padding: 20px;
    border-radius: 12px;
    box-shadow: var(--shadow);
    transition: background-color var(--transition-speed), box-shadow var(--transition-speed);
    animation: fadeIn var(--transition-speed) ease-in-out;
}

.left-panel {
    width: 48%;
    max-height: calc(100vh - 140px);
    overflow-y: auto;
    position: relative;
}

#right-panel {
    position: fixed;
    right: 20px;
    top: 70px;
    width: calc(48% - 40px);
    height: calc(100vh - 140px);
    overflow-y: auto;
    padding-bottom: 20px;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.panel h2 {
    font-size: 20px;
    color: var(--primary-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}

.panel-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

input[type="text"],
select,
textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--panel-background-color);
    color: var(--text-color);
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}

input[type="text"]:focus,
select:focus,
textarea:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.2);
}

.button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color var(--transition-speed), box-shadow var(--transition-speed), transform var(--transition-speed);
    font-size: 16px;
    margin-top: 8px;
    color: #fff;
}

.button-primary {
    background-color: var(--primary-color);
}

.button-primary:hover {
    background-color: var(--primary-color-dark);
    box-shadow: var(--shadow);
    transform: translateY(-2px);
}

.button-accent {
    background-color: var(--accent-color);
}

.button-accent:hover {
    background-color: var(--accent-color-dark);
    box-shadow: var(--shadow);
    transform: translateY(-2px);
}

.output-panel {
    margin-top: 15px;
    border: 1px solid var(--border-color);
}

textarea#json-area,
#preview-content {
    height: 200px;
    resize: vertical;
    overflow-y: auto;
}

.footer-links a {
    color: var(--footer-link-color);
    text-decoration: none;
    margin: 0 10px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.footer-links a[aria-label="YouTube"] {
    color: #FF0000;
}

.footer-links a[aria-label="Instagram"] {
    color: #E1306C;
}

.footer-links a[aria-label="Discord"] {
    color: #7289DA;
}

.footer-links a:hover {
    transform: translateY(-2px);
    text-decoration: underline;
}

#developer-link {
    font-weight: bold;
    color: var(--developer-link-color);
    text-decoration: none;
    transition: all 0.3s ease;
}

#developer-link:hover {
    transform: translateY(-2px);
    text-decoration: underline;
}

.donate {
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--donate-link-color);
    margin-left: 10px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.donate i {
    margin-right: 5px;
}

.donate:hover {
    color: var(--donate-link-hover-color);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .container {
        flex-direction: column;
        padding-top: 60px;
        padding-left: 20px;
        padding-right: 20px;
    }

    .panel {
        width: 100%;
    }

    #right-panel {
        position: static;
        width: 100%;
        height: auto;
    }
}

.content {
    margin-bottom: 10px;
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--panel-background-color);
    transition: box-shadow var(--transition-speed);
    display: flex;
    flex-direction: column;
    gap: 10px;
    cursor: grab;
    color: var(--text-color);
}

.content.dragging {
    opacity: 0.5;
    box-shadow: var(--shadow);
}

.content-controls {
    display: flex;
    gap: 10px;
    justify-content: flex-start;
}

.chat-button {
    position: fixed;
    bottom: 80px;
    right: 20px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 50%;
    padding: 15px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    z-index: 1001;
    transition: all 0.3s ease;
}

.chat-button:hover {
    transform: scale(1.1);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
}

.chat-button .unread-dot {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 10px;
    height: 10px;
    background-color: red;
    border-radius: 50%;
    display: none;
}

#chat-container {
    width: 400px;
    height: 500px;
    position: fixed;
    bottom: 140px;
    right: 20px;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    display: none;
    background-color: var(--panel-background-color);
    z-index: 1002;
    flex-direction: column;
}

#chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    background-color: var(--panel-background-color);
    word-wrap: break-word;
    word-break: break-word;
    display: flex;
    flex-direction: column;
}

#chat-messages::-webkit-scrollbar {
    width: 8px;
}

#chat-messages::-webkit-scrollbar-track {
    background: var(--panel-background-color);
}

#chat-messages::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-color);
    border-radius: 10px;
}

#chat-messages li {
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    max-width: 80%;
}

#chat-messages li.sent {
    align-self: flex-end;
    align-items: flex-end;
}

#chat-messages li.sent .message-header {
    flex-direction: row-reverse;
}

#chat-messages li.sent .message-header img {
    margin-left: 5px;
    margin-right: 0;
}

#chat-messages li.sent .username {
    margin-right: 5px;
    margin-left: 0;
}

#chat-messages .message-header {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    font-size: 0.9em;
}

#chat-messages .message-header img {
    width: 24px;
    height: 24px;
    border-radius: 50%;
}

#chat-messages li.received .message-header img {
    margin-right: 5px;
}

#chat-messages .username {
    font-weight: bold;
}

#chat-messages li.received .username {
    margin-left: 5px;
}

#chat-messages li.received {
    align-self: flex-start;
    align-items: flex-start;
}

#chat-messages .message-content {
    padding: 10px 15px;
    border-radius: 10px;
    background-color: var(--received-message-bg);
    color: var(--received-message-text-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
}

#chat-messages li.sent .message-content {
    background-color: var(--sent-message-bg);
    color: var(--sent-message-text-color);
}

#chat-messages li.developer .message-content {
    background-color: var(--developer-message-bg);
    color: var(--developer-message-text-color);
}

#chat-messages li.developer .username {
    color: var(--developer-link-color);
}

#chat-input {
    display: flex;
    padding: 10px;
    border-top: 1px solid var(--border-color);
}

#message-input {
    flex: 1;
    padding: 8px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    margin-right: 10px;
}

#send-button {
    background-color: var(--primary-color);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
}

#login-modal, #username-modal {
    display: none;
    position: fixed;
    z-index: 1003;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: var(--modal-background-color);
    justify-content: center;
    align-items: center;
}

#login-modal-content, #username-modal-content {
    background-color: var(--modal-content-background);
    padding: 20px;
    border-radius: 10px;
    width: 300px;
    text-align: center;
}

.login-method-button {
    display: block;
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.close-modal {
    color: var(--text-color);
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-modal:hover,
.close-modal:focus {
    color: var(--primary-color);
    text-decoration: none;
    cursor: pointer;
}

#username-input {
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
}

#setUsernameBtn {
    display: block;
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}
    </style>
</head>
<body data-theme="dark">
    <header>
        <h1><i class="fas fa-cogs"></i> <span id="headerTitle">Text Component Generator</span></h1>
        <div class="header-right">
            <a href="https://nosmc.github.io" class="home-button" aria-label="Home">
                <i class="fas fa-home"></i> <span id="home">Home</span>
            </a>
            <div class="dropdown">
                <button class="dropdown-button" aria-label="Generators"><i class="fas fa-caret-down"></i> <span id="generators">Generators</span></button>
                <div class="dropdown-content">
                    <a href="#" data-generator="text"><span id="generatorText">Text</span></a>
                    <a href="#" data-generator="item"><span id="generatorItem">Item</span></a>
                    <a href="#" data-generator="entity"><span id="generatorEntity">Entity</span></a>
                </div>
            </div>
            <button class="language-button" id="language-switcher" aria-label="Switch Language">
                <i class="fas fa-language"></i>
            </button>
            <div id="theme-switcher" aria-label="Switch Theme"><i class="fas fa-adjust"></i></div>
            <div id="login-btn" aria-label="Login"><i class="fas fa-user"></i></div>
        </div>
    </header>

    <div class="container">
        <div class="panel left-panel">
            <h2><i class="fas fa-list"></i> <span id="contentList">Content List</span></h2>
            <div id="content-list"></div>

            <div class="panel-content">
                <label for="content-type"><span id="contentType">Content Type:</span></label>
                <select id="content-type">
                    <option value="plainText" id="plainTextOption">Plain Text</option>
                    <option value="translatedText" id="translatedTextOption">Translated Text</option>
                    <option value="score" id="scoreOption">Score</option>
                    <option value="selector" id="selectorOption">Selector</option>
                    <option value="keybind" id="keybindOption">Keybind</option>
                    <option value="nbt" id="nbtOption">NBT</option>
                    <option value="linebreak" id="linebreakOption">Line Break</option>
                </select>
                <button id="add-content-btn" class="button button-primary" aria-label="Add Content"><i class="fas fa-plus-circle"></i> <span id="addContent">Add Content</span></button>
            </div>
        </div>

        <div id="right-panel" class="panel">
            <div class="output-panel">
                <h2><i class="fas fa-code"></i> <span id="jsonEditor">JSON Editor</span></h2>
                <div>
                    <label for="indentation"><span id="jsonIndentation">JSON Indentation:</span></label>
                    <select id="indentation">
                        <option value="none">None</option>
                        <option value="2">2 Spaces</option>
                        <option value="4">4 Spaces</option>
                    </select>
                </div>
                <textarea id="json-area"></textarea>
                <button id="copy-json-btn" class="button button-accent" aria-label="Copy JSON"><i class="fas fa-copy"></i> <span id="copyJson">Copy JSON</span></button>
                <button id="clear-all-btn" class="button button-accent" aria-label="Clear All"><i class="fas fa-trash-alt"></i> <span id="clearAll">Clear All</span></button>
            </div>

            <div id="html-preview" class="panel">
                <h2><i class="fas fa-eye"></i> <span id="preview">Preview</span></h2>
                <div id="preview-content"></div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-links">
            <a href="https://www.youtube.com/@n_os_" target="_blank" style="color: #FF0000;" aria-label="YouTube"><i class="fab fa-youtube"></i> <span id="youtube">YouTube</span></a>
            <a href="https://www.instagram.com/" target="_blank" style="color: #E1306C;" aria-label="Instagram"><i class="fab fa-instagram"></i> <span id="instagram">Instagram</span></a>
            <a href="https://discord.gg/Pah6vw36Tw" target="_blank" style="color: #7289DA;" aria-label="Discord"><i class="fab fa-discord"></i> <span id="discord">Discord</span></a>
        </div>
        <p>
            <a id="developer-link" href="https://github.com/nosmc" target="_blank">&copy; <span id="developedBy">Developed by nos</span></a>
            <a href="https://donation-link.com" target="_blank" class="donate"><i class="fas fa-heart"></i> <span id="donate">Donate</span></a>
        </p>
    </footer>

    <!-- Chat Container -->
    <div id="chat-container">
        <h2><i class="fas fa-comments"></i> <span id="chatTitle">Chat</span></h2>
        <ul id="chat-messages"></ul>
        <div id="chat-input">
            <input type="text" id="message-input" placeholder="Type a message..." aria-label="Message Input">
            <button id="send-button"><span id="sendButtonText">Send</span></button>
        </div>
    </div>

    <button class="chat-button" aria-label="Open Chat">
        <i class="fas fa-comments"></i>
        <span class="unread-dot"></span>
    </button>

    <!-- Login Modal -->
    <div id="login-modal">
        <div id="login-modal-content">
            <h3 id="chooseLoginMethod">Choose a Login Method</h3>
            <button id="login-google" class="login-method-button">
                <span id="loginWithGoogle">Login with Google</span>
            </button>
            <button id="login-github" class="login-method-button">
                <span id="loginWithGithub">Login with GitHub</span>
            </button>
            <div class="close-modal" id="close-login-modal">
                <span id="cancelLogin">Cancel</span>
            </div>
        </div>
    </div>

    <!-- Username Modal -->
    <div id="username-modal">
        <div id="username-modal-content">
            <h3 id="setUsernameTitle">Set Your Username</h3>
            <input type="text" id="username-input" placeholder="Enter your username">
            <p id="username-error" style="color: red; display: none;"></p>
            <button id="setUsernameBtn">Set Username</button>
            <div class="close-modal" id="close-username-modal">
                <span id="cancelSetUsername">Cancel</span>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/mode/javascript/javascript.min.js"></script>
    <script type="module">
        // Import Firebase SDKs
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { getAuth, GithubAuthProvider, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-auth.js";
import { getDatabase, ref, push, onChildAdded, query, orderByChild, set, get, equalTo } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyDzku7AoSdbF7GzZTJEtVj5beyl1MnrTAk",
    authDomain: "minecraft-generators.firebaseapp.com",
    databaseURL: "https://minecraft-generators-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "minecraft-generators",
    storageBucket: "minecraft-generators.appspot.com",
    messagingSenderId: "191346462383",
    appId: "1:191346462383:web:6c8759e5ee2f676594ce5a",
    measurementId: "G-QJT1XPTPDZ"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const database = getDatabase(app);

// Global variables
let currentUser = null;
let username = null;
let messagesRef = null;
const developerUsername = "nos";
let isSettingUsername = false;
let hasSetUsername = false;
let unreadMessages = 0;
let isChatOpen = false;

// DOM elements
const chatButton = document.querySelector('.chat-button');
const chatContainer = document.getElementById('chat-container');
const messagesList = document.getElementById('chat-messages');
const messageInput = document.getElementById('message-input');
const sendButton = document.getElementById('send-button');
const loginButton = document.getElementById('login-btn');
const loginModal = document.getElementById('login-modal');
const closeLoginModal = document.getElementById('close-login-modal');
const googleLoginBtn = document.getElementById('login-google');
const githubLoginBtn = document.getElementById('login-github');
const usernameModal = document.getElementById('username-modal');
const usernameInput = document.getElementById('username-input');
const setUsernameBtn = document.getElementById('setUsernameBtn');
const closeUsernameModal = document.getElementById('close-username-modal');
const unreadDot = document.querySelector('.unread-dot');

// Firebase providers
const googleProvider = new GoogleAuthProvider();
const githubProvider = new GithubAuthProvider();

// Event listeners
chatButton.addEventListener('click', toggleChat);
loginButton.addEventListener('click', handleLoginButtonClick);
closeLoginModal.addEventListener('click', () => loginModal.style.display = 'none');
googleLoginBtn.addEventListener('click', () => signInWithProvider(googleProvider));
githubLoginBtn.addEventListener('click', () => signInWithProvider(githubProvider));
sendButton.addEventListener('click', sendMessage);
messageInput.addEventListener('keypress', handleMessageInputKeypress);
setUsernameBtn.addEventListener('click', handleSetUsername);
closeUsernameModal.addEventListener('click', () => {
    usernameModal.style.display = 'none';
    signOut(auth);
});

// Functions
function toggleChat() {
    isChatOpen = !isChatOpen;
    chatContainer.style.display = isChatOpen ? 'flex' : 'none';
    if (isChatOpen) {
        messagesList.scrollTop = messagesList.scrollHeight;
        clearUnreadIndicator();
    }
}

function handleLoginButtonClick() {
    if (currentUser) {
        signOut(auth).then(() => {
            currentUser = null;
            username = null;
            hasSetUsername = false;
            removeMessagesListener();
        }).catch(error => {
            console.error("Error signing out:", error);
        });
    } else {
        loginModal.style.display = 'flex';
    }
}

function signInWithProvider(provider) {
    signInWithPopup(auth, provider).then(result => {
        currentUser = result.user;
        loginModal.style.display = 'none';
        checkUsername();
    }).catch(error => {
        console.error(`Error during ${provider.providerId} login:`, error);
    });
}

function checkUsername() {
    get(ref(database, `users/${currentUser.uid}/username`)).then(snapshot => {
        if (snapshot.exists()) {
            username = snapshot.val();
            hasSetUsername = true;
            loadMessages();
        } else {
            usernameModal.style.display = 'flex';
        }
    }).catch(error => {
        console.error("Error checking username:", error);
    });
}

function handleSetUsername() {
    const newUsername = usernameInput.value.trim();
    if (newUsername) {
        saveUsername(newUsername);
    } else {
        showUsernameError(translations.usernameEmpty[currentLanguage]);
    }
}

function saveUsername(newUsername) {
    set(ref(database, `users/${currentUser.uid}/username`), newUsername).then(() => {
        username = newUsername;
        hasSetUsername = true;
        usernameModal.style.display = 'none';
        loadMessages();
    }).catch(error => {
        console.error("Error saving username:", error);
    });
}

function showUsernameError(errorMessage) {
    const usernameError = document.getElementById('username-error');
    usernameError.textContent = errorMessage;
    usernameError.style.display = 'block';
}

function loadMessages() {
    messagesRef = ref(database, 'messages');
    const messagesQuery = query(messagesRef, orderByChild('timestamp'));
    onChildAdded(messagesQuery, snapshot => {
        const message = snapshot.val();
        displayMessage(message);
    });
}

function displayMessage(message) {
    const messageElement = document.createElement('li');
    messageElement.classList.add(message.username === username ? 'sent' : 'received');
    if (message.username === developerUsername) {
        messageElement.classList.add('developer');
    }
    messageElement.innerHTML = `
        <div class="message-header">
            <img src="${message.photoURL}" alt="${message.username}'s avatar">
            <span class="username">${message.username}</span>
            <span class="time">${formatTimestamp(message.timestamp)}</span>
        </div>
        <div class="message-content">${message.text}</div>
    `;
    messagesList.appendChild(messageElement);
    if (!isChatOpen) {
        unreadMessages++;
        showUnreadIndicator();
    }
    messagesList.scrollTop = messagesList.scrollHeight;
}

function formatTimestamp(timestamp) {
    const date = new Date(timestamp);
    const hours = date.getHours().toString().padStart(2, '0');
    const minutes = date.getMinutes().toString().padStart(2, '0');
    return `${hours}:${minutes}`;
}

function showUnreadIndicator() {
    unreadDot.style.display = 'block';
    unreadDot.textContent = unreadMessages;
}

function clearUnreadIndicator() {
    unreadMessages = 0;
    unreadDot.style.display = 'none';
}

function sendMessage() {
    const messageText = messageInput.value.trim();
    if (messageText && hasSetUsername) {
        const message = {
            text: messageText,
            username: username,
            photoURL: currentUser.photoURL,
            timestamp: Date.now()
        };
        push(messagesRef, message);
        messageInput.value = '';
    }
}

function handleMessageInputKeypress(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

function removeMessagesListener() {
    if (messagesRef) {
        off(messagesRef);
        messagesRef = null;
        messagesList.innerHTML = '';
    }
}

// Translations
const translations = {
    en: {
        headerTitle: "Text Component Generator",
        home: "Home",
        generators: "Generators",
        generatorText: "Text",
        generatorItem: "Item",
        generatorEntity: "Entity",
        contentList: "Content List",
        contentType: "Content Type:",
        plainTextOption: "Plain Text",
        translatedTextOption: "Translated Text",
        scoreOption: "Score",
        selectorOption: "Selector",
        keybindOption: "Keybind",
        nbtOption: "NBT",
        linebreakOption: "Line Break",
        addContent: "Add Content",
        jsonEditor: "JSON Editor",
        jsonIndentation: "JSON Indentation:",
        copyJson: "Copy JSON",
        clearAll: "Clear All",
        preview: "Preview",
        youtube: "YouTube",
        instagram: "Instagram",
        discord: "Discord",
        developedBy: "Developed by nos",
        donate: "Donate",
        chatTitle: "Chat",
        sendButtonText: "Send",
        chooseLoginMethod: "Choose a Login Method",
        loginWithGoogle: "Login with Google",
        loginWithGithub: "Login with GitHub",
        cancelLogin: "Cancel",
        setUsernameTitle: "Set Your Username",
        setUsernameBtn: "Set Username",
        cancelSetUsername: "Cancel",
        usernameEmpty: "Username cannot be empty"
    },
    zh: {
        headerTitle: "文本组件生成器",
        home: "主页",
        generators: "生成器",
        generatorText: "文本",
        generatorItem: "物品",
        generatorEntity: "实体",
        contentList: "内容列表",
        contentType: "内容类型：",
        plainTextOption: "普通文本",
        translatedTextOption: "翻译文本",
        scoreOption: "分数",
        selectorOption: "选择器",
        keybindOption: "快捷键",
        nbtOption: "NBT",
        linebreakOption: "换行",
        addContent: "添加内容",
        jsonEditor: "JSON编辑器",
        jsonIndentation: "JSON缩进：",
        copyJson: "复制JSON",
        clearAll: "清空所有",
        preview: "预览",
        youtube: "YouTube",
        instagram: "Instagram",
        discord: "Discord",
        developedBy: "由nos开发",
        donate: "捐赠",
        chatTitle: "聊天",
        sendButtonText: "发送",
        chooseLoginMethod: "选择登录方式",
        loginWithGoogle: "使用Google登录",
        loginWithGithub: "使用GitHub登录",
        cancelLogin: "取消",
        setUsernameTitle: "设置用户名",
        setUsernameBtn: "设置用户名",
        cancelSetUsername: "取消",
        usernameEmpty: "用户名不能为空"
    }
};

// Language switching
const languageSwitcher = document.getElementById('language-switcher');
const currentLanguage = localStorage.getItem('language') || 'en';
languageSwitcher.addEventListener('click', () => {
    const newLanguage = currentLanguage === 'en' ? 'zh' : 'en';
    localStorage.setItem('language', newLanguage);
    updateLanguage(newLanguage);
});

function updateLanguage(language) {
    for (const key in translations[language]) {
        const element = document.getElementById(key);
        if (element) {
            element.textContent = translations[language][key];
        }
    }
    document.documentElement.lang = language;
}

updateLanguage(currentLanguage);

// Theme switching
const themeSwitcher = document.getElementById('theme-switcher');
const currentTheme = localStorage.getItem('theme') || 'dark';
themeSwitcher.addEventListener('click', () => {
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    localStorage.setItem('theme', newTheme);
    updateTheme(newTheme);
});

function updateTheme(theme) {
    document.body.dataset.theme = theme;
    themeSwitcher.innerHTML = `<i class="fas fa-${theme === 'dark' ? 'adjust' : 'sun'}"></i>`;
}

updateTheme(currentTheme);

// Initialize CodeMirror
const jsonArea = document.getElementById('json-area');
const jsonEditor = CodeMirror.fromTextArea(jsonArea, {
    mode: 'application/json',
    lineNumbers: true,
    theme: 'default',
    indentUnit: 2,
    indentWithTabs: false,
    tabSize: 2,
    lineWrapping: true,
    autoCloseBrackets: true,
    matchBrackets: true,
    autoCloseTags: true,
    foldGutter: true,
    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
});

jsonEditor.on('change', () => {
    jsonArea.value = jsonEditor.getValue();
});

// Copy JSON to clipboard
const copyJsonBtn = document.getElementById('copy-json-btn');
copyJsonBtn.addEventListener('click', () => {
    const jsonText = jsonEditor.getValue();
    navigator.clipboard.writeText(jsonText).then(() => {
        alert('JSON copied to clipboard!');
    }).catch(err => {
        console.error('Error copying JSON to clipboard:', err);
    });
});

// Clear all
const clearAllBtn = document.getElementById('clear-all-btn');
clearAllBtn.addEventListener('click', () => {
    jsonEditor.setValue('');
    previewContent.innerHTML = '';
    contentList.innerHTML = '';
});

// Preview
const previewContent = document.getElementById('preview-content');
const updatePreview = () => {
    const json = jsonEditor.getValue();
    try {
        const parsedJson = JSON.parse(json);
        previewContent.innerHTML = JSON.stringify(parsedJson, null, 2);
    } catch (error) {
        previewContent.innerHTML = 'Invalid JSON';
    }
};

jsonEditor.on('change', updatePreview);

// Content list
const contentList = document.getElementById('content-list');
const contentTypeSelect = document.getElementById('content-type');
const addContentBtn = document.getElementById('add-content-btn');

addContentBtn.addEventListener('click', () => {
    const contentType = contentTypeSelect.value;
    const content = createContentElement(contentType);
    contentList.appendChild(content);
});

function createContentElement(contentType) {
    const content = document.createElement('div');
    content.classList.add('content');
    content.draggable = true;

    const contentControls = document.createElement('div');
    contentControls.classList.add('content-controls');

    const deleteBtn = document.createElement('button');
    deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
    deleteBtn.classList.add('button', 'button-accent');
    deleteBtn.addEventListener('click', () => {
        content.remove();
    });

    contentControls.appendChild(deleteBtn);

    switch (contentType) {
        case 'plainText':
            const plainTextInput = document.createElement('input');
            plainTextInput.type = 'text';
            plainTextInput.placeholder = 'Enter plain text';
            content.appendChild(plainTextInput);
            break;
        case 'translatedText':
            const translatedTextInput = document.createElement('input');
            translatedTextInput.type = 'text';
            translatedTextInput.placeholder = 'Enter translated text';
            content.appendChild(translatedTextInput);
            break;
        case 'score':
            const scoreInput = document.createElement('input');
            scoreInput.type = 'text';
            scoreInput.placeholder = 'Enter score';
            content.appendChild(scoreInput);
            break;
        case 'selector':
            const selectorInput = document.createElement('input');
            selectorInput.type = 'text';
            selectorInput.placeholder = 'Enter selector';
            content.appendChild(selectorInput);
            break;
        case 'keybind':
            const keybindInput = document.createElement('input');
            keybindInput.type = 'text';
            keybindInput.placeholder = 'Enter keybind';
            content.appendChild(keybindInput);
            break;
        case 'nbt':
            const nbtInput = document.createElement('input');
            nbtInput.type = 'text';
            nbtInput.placeholder = 'Enter NBT';
            content.appendChild(nbtInput);
            break;
        case 'linebreak':
            const linebreakText = document.createElement('span');
            linebreakText.textContent = 'Line Break';
            content.appendChild(linebreakText);
            break;
    }

    content.appendChild(contentControls);
    return content;
}

// Drag and drop
contentList.addEventListener('dragstart', (e) => {
    e.target.classList.add('dragging');
});

contentList.addEventListener('dragend', (e) => {
    e.target.classList.remove('dragging');
});

contentList.addEventListener('dragover', (e) => {
    e.preventDefault();
    const afterElement = getDragAfterElement(contentList, e.clientY);
    const draggable = document.querySelector('.dragging');
    if (afterElement == null) {
        contentList.appendChild(draggable);
    } else {
        contentList.insertBefore(draggable, afterElement);
    }
});

function getDragAfterElement(container, y) {
    const draggableElements = [...container.querySelectorAll('.content:not(.dragging)')];

    return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
            return { offset: offset, element: child };
        } else {
            return closest;
        }
    }, { offset: Number.NEGATIVE_INFINITY }).element;
}
    </script>
</body>
</html>
const jsonArea = document.getElementById('json-area');
const jsonEditor = CodeMirror.fromTextArea(jsonArea, {
    mode: 'application/json',
    lineNumbers: true,
    theme: 'default',
    indentUnit: 2,
    indentWithTabs: false,
    tabSize: 2,
    lineWrapping: true,
    autoCloseBrackets: true,
    matchBrackets: true,
    autoCloseTags: true,
    foldGutter: true,
    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
});

jsonEditor.on('change', () => {
    jsonArea.value = jsonEditor.getValue();
});

// Copy JSON to clipboard
const copyJsonBtn = document.getElementById('copy-json-btn');
copyJsonBtn.addEventListener('click', () => {
    const jsonText = jsonEditor.getValue();
    navigator.clipboard.writeText(jsonText).then(() => {
        alert('JSON copied to clipboard!');
    }).catch(err => {
        console.error('Error copying JSON to clipboard:', err);
    });
});

// Clear all
const clearAllBtn = document.getElementById('clear-all-btn');
clearAllBtn.addEventListener('click', () => {
    jsonEditor.setValue('');
    previewContent.innerHTML = '';
    contentList.innerHTML = '';
});

// Preview
const previewContent = document.getElementById('preview-content');
const updatePreview = () => {
    const json = jsonEditor.getValue();
    try {
        const parsedJson = JSON.parse(json);
        previewContent.innerHTML = JSON.stringify(parsedJson, null, 2);
    } catch (error) {
        previewContent.innerHTML = 'Invalid JSON';
    }
};

jsonEditor.on('change', updatePreview);

// Content list
const contentList = document.getElementById('content-list');
const contentTypeSelect = document.getElementById('content-type');
const addContentBtn = document.getElementById('add-content-btn');

addContentBtn.addEventListener('click', () => {
    const contentType = contentTypeSelect.value;
    const content = createContentElement(contentType);
    contentList.appendChild(content);
});

function createContentElement(contentType) {
    const content = document.createElement('div');
    content.classList.add('content');
    content.draggable = true;

    const contentControls = document.createElement('div');
    contentControls.classList.add('content-controls');

    const deleteBtn = document.createElement('button');
    deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
    deleteBtn.classList.add('button', 'button-accent');
    deleteBtn.addEventListener('click', () => {
        content.remove();
    });

    contentControls.appendChild(deleteBtn);

    switch (contentType) {
        case 'plainText':
            const plainTextInput = document.createElement('input');
            plainTextInput.type = 'text';
            plainTextInput.placeholder = 'Enter plain text';
            content.appendChild(plainTextInput);
            break;
        case 'translatedText':
            const translatedTextInput = document.createElement('input');
            translatedTextInput.type = 'text';
            translatedTextInput.placeholder = 'Enter translated text';
            content.appendChild(translatedTextInput);
            break;
        case 'score':
            const scoreInput = document.createElement('input');
            scoreInput.type = 'text';
            scoreInput.placeholder = 'Enter score';
            content.appendChild(scoreInput);
            break;
        case 'selector':
            const selectorInput = document.createElement('input');
            selectorInput.type = 'text';
            selectorInput.placeholder = 'Enter selector';
            content.appendChild(selectorInput);
            break;
        case 'keybind':
            const keybindInput = document.createElement('input');
            keybindInput.type = 'text';
            keybindInput.placeholder = 'Enter keybind';
            content.appendChild(keybindInput);
            break;
        case 'nbt':
            const nbtInput = document.createElement('input');
            nbtInput.type = 'text';
            nbtInput.placeholder = 'Enter NBT';
            content.appendChild(nbtInput);
            break;
        case 'linebreak':
            const linebreakText = document.createElement('span');
            linebreakText.textContent = 'Line Break';
            content.appendChild(linebreakText);
            break;
    }

    content.appendChild(contentControls);
    return content;
}

// Drag and drop
contentList.addEventListener('dragstart', (e) => {
    e.target.classList.add('dragging');
});

contentList.addEventListener('dragend', (e) => {
    e.target.classList.remove('dragging');
});

contentList.addEventListener('dragover', (e) => {
    e.preventDefault();
    const afterElement = getDragAfterElement(contentList, e.clientY);
    const draggable = document.querySelector('.dragging');
    if (afterElement == null) {
        contentList.appendChild(draggable);
    } else {
        contentList.insertBefore(draggable, afterElement);
    }
});

function getDragAfterElement(container, y) {
    const draggableElements = [...container.querySelectorAll('.content:not(.dragging)')];

    return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        if (offset < 0 && offset > closest.offset) {
            return { offset: offset, element: child };
        } else {
            return closest;
        }
    }, { offset: Number.NEGATIVE_INFINITY }).element;
}

function moveContent(index, direction) {
    const newIndex = index + direction;
    if (newIndex >= 0 && newIndex < contents.length) {
        const temp = contents[index];
        contents[index] = contents[newIndex];
        contents[newIndex] = temp;
        updateUI();
        saveContents();
    }
}

function duplicateContent(index) {
    const newContent = JSON.parse(JSON.stringify(contents[index]));
    contents.splice(index + 1, 0, newContent);
    updateUI();
    saveContents();
}

function deleteContent(index) {
    contents.splice(index, 1);
    updateUI();
    saveContents();
}

function updateOutputAndPreview() {
    const output = contents.map(content => {
        let jsonContent = {};

        if (content.type === 'plainText') {
            jsonContent.text = content.data.text;
        } else if (content.type === 'translatedText') {
            jsonContent.translate = content.data.translate;
            if (content.data.with && content.data.with.length > 0) {
                jsonContent.with = content.data.with.map(withContent => ({ text: withContent.data.text }));
            }
        } else if (content.type === 'score') {
            jsonContent.score = {
                name: content.data.scoreName,
                objective: content.data.scoreObjective,
            };
        } else if (content.type === 'selector') {
            jsonContent.selector = content.data.selector;
        } else if (content.type === 'keybind') {
            jsonContent.keybind = content.data.keybind;
        } else if (content.type === 'nbt') {
            jsonContent.nbt = content.data.nbtPath;
            jsonContent[content.data.nbtSource] = content.data.storageSource || undefined;
            jsonContent.interpret = content.data.interpret;
        } else if (content.type === 'linebreak') {
            return "\n";
        }

        if (content.data.color !== 'none') {
            jsonContent.color = content.data.color;
        }
        if (content.data.bold) jsonContent.bold = content.data.bold;
        if (content.data.italic) jsonContent.italic = content.data.italic;
        if (content.data.underlined) jsonContent.underlined = content.data.underlined;
        if (content.data.strikethrough) jsonContent.strikethrough = content.data.strikethrough;
        if (content.data.obfuscated) jsonContent.obfuscated = content.data.obfuscated;

        if (content.clickEvent && content.clickEvent.action) {
            jsonContent.clickEvent = {
                action: content.clickEvent.action,
                value: content.clickEvent.value
            };
        }

        if (content.hoverEvent && content.hoverEvent.action) {
            jsonContent.hoverEvent = {
                action: content.hoverEvent.action,
                contents: content.hoverEvent.contents
            };
        }

        return jsonContent;
    });

    const indentation = document.getElementById('indentation').value;
    const jsonOutput = JSON.stringify(output, null, indentation === 'none' ? 0 : parseInt(indentation));
    document.getElementById('json-area').value = jsonOutput;

    updatePreview(output);
}

function updatePreview(output) {
    const previewDiv = document.getElementById('preview-content');
    previewDiv.innerHTML = ''; // Clear the previous content

    output.forEach(content => {
        if (content === '\n') {
            previewDiv.appendChild(document.createElement('br'));
            return;
        }

        const span = document.createElement('span');

        if (content.color && content.color !== 'none') {
            span.style.color = minecraftColorMap[content.color];
        }
        if (content.bold) span.style.fontWeight = 'bold';
        if (content.italic) span.style.fontStyle = 'italic';
        if (content.underlined) span.style.textDecoration = 'underline';
        if (content.strikethrough) span.style.textDecoration = (span.style.textDecoration ? span.style.textDecoration + ' ' : '') + 'line-through';
        if (content.obfuscated) span.style.filter = 'blur(2px)';

        let textContent = '';
        if (content.text) {
            textContent = content.text;
        } else if (content.translate) {
            textContent = content.translate;
        } else if (content.score) {
            textContent = `${content.score.name}:${content.score.objective}`;
        } else if (content.selector) {
            textContent = content.selector;
        } else if (content.keybind) {
            textContent = content.keybind;
        } else if (content.nbt) {
            textContent = content.nbt;
        }

        span.textContent = textContent;

        // Handle click events
        if (content.clickEvent) {
            span.className = 'click-event';
            span.style.cursor = 'pointer';
            span.addEventListener('click', () => {
                if (content.clickEvent.action === 'run_command') {
                    alert(`Running command: ${content.clickEvent.value}`);
                } else if (content.clickEvent.action === 'open_url') {
                    window.open(content.clickEvent.value, '_blank');
                } else if (content.clickEvent.action === 'suggest_command') {
                    alert(`Suggested command: ${content.clickEvent.value}`);
                } else if (content.clickEvent.action === 'change_page') {
                    alert(`Changing to page: ${content.clickEvent.value}`);
                } else if (content.clickEvent.action === 'copy_to_clipboard') {
                    navigator.clipboard.writeText(content.clickEvent.value).then(() => {
                        alert('Copied to clipboard!');
                    });
                }
            });
        }

        // Handle hover events
        if (content.hoverEvent && content.hoverEvent.action === 'show_text') {
            span.className = 'hover-event';
            span.title = content.hoverEvent.contents.map(content => content.text).join('');
        }

        previewDiv.appendChild(span);
        previewDiv.appendChild(document.createTextNode(' ')); // Add space between contents
    });
}

function copyJsonToClipboard() {
    const jsonArea = document.getElementById('json-area');
    jsonArea.select();
    document.execCommand('copy');
}

function clearAll() {
    contents = [];
    updateUI();
    document.getElementById('json-area').value = '';
    document.getElementById('preview-content').innerHTML = '';
    localStorage.removeItem('contents');
}

function saveContents() {
    localStorage.setItem('contents', JSON.stringify(contents));
}

// JSON input event listener
document.getElementById('json-area').addEventListener('input', debounce(() => {
    const jsonArea = document.getElementById('json-area').value;
    try {
        const parsedContents = JSON.parse(jsonArea);
        contents = parsedContents.map(parseJsonContent).filter(Boolean);
        updateUI();
        saveContents();
    } catch (e) {
        console.error("Invalid JSON input", e);
    }
}, 300));

function parseJsonContent(content) {
    if (typeof content === 'string' && content === '\n') {
        return createContent('linebreak');
    }

    let type, data = {};

    if (content.text !== undefined) {
        type = 'plainText';
        data.text = content.text;
    } else if (content.translate !== undefined) {
        type = 'translatedText';
        data.translate = content.translate;
        if (content.with) {
            data.with = content.with.map(withContent => ({ text: withContent.text }));
        }
    } else if (content.score !== undefined) {
        type = 'score';
        data.scoreName = content.score.name;
        data.scoreObjective = content.score.objective;
    } else if (content.selector !== undefined) {
        type = 'selector';
        data.selector = content.selector;
    } else if (content.keybind !== undefined) {
        type = 'keybind';
        data.keybind = content.keybind;
    } else if (content.nbt !== undefined) {
        type = 'nbt';
        data.nbtPath = content.nbt;
        data.nbtSource = content.storage ? 'storage' : content.block ? 'block' : 'entity';
        data.storageSource = content.storage || '';
        data.interpret = content.interpret || false;
    } else {
        return null; // Invalid content type
    }

    const newContent = createContent(type, data);

    newContent.data.color = content.color || 'none';
    newContent.data.bold = content.bold || false;
    newContent.data.italic = content.italic || false;
    newContent.data.underlined = content.underlined || false;
    newContent.data.strikethrough = content.strikethrough || false;
    newContent.data.obfuscated = content.obfuscated || false;

    if (content.clickEvent) {
        newContent.clickEvent = { action: content.clickEvent.action, value: content.clickEvent.value };
    }

    if (content.hoverEvent) {
        newContent.hoverEvent = {
            action: content.hoverEvent.action,
            contents: content.hoverEvent.contents || []
        };
    }

    return newContent;
}

function debounce(func, delay) {
    let timeout;
    return function (...args) {
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(this, args), delay);
    };
}

// Translations
const translations = {
    headerTitle: {
        en: "Text Component Generator",
        zh: "文本组件生成器"
    },
    home: {
        en: "Home",
        zh: "主页"
    },
    generators: {
        en: "Generators",
        zh: "生成器"
    },
    generatorText: {
        en: "Text",
        zh: "文字"
    },
    generatorItem: {
        en: "Item",
        zh: "物品"
    },
    generatorEntity: {
        en: "Entity",
        zh: "实体"
    },
    contentList: {
        en: "Content List",
        zh: "内容列表"
    },
    addContent: {
        en: "Add Content",
        zh: "添加内容"
    },
    jsonEditor: {
        en: "JSON Editor",
        zh: "JSON 编辑器"
    },
    preview: {
        en: "Preview",
        zh: "预览"
    },
    copyJson: {
        en: "Copy JSON",
        zh: "复制 JSON"
    },
    clearAll: {
        en: "Clear All",
        zh: "清除所有"
    },
    contentType: {
        en: "Content Type:",
        zh: "内容类型："
    },
    jsonIndentation: {
        en: "JSON Indentation:",
        zh: "JSON 缩进："
    },
    none: {
        en: "None",
        zh: "无"
    },
    twoSpaces: {
        en: "2 Spaces",
        zh: "2 个空格"
    },
    fourSpaces: {
        en: "4 Spaces",
        zh: "4 个空格"
    },
    plainText: {
        en: "Plain Text",
        zh: "纯文本"
    },
    translatedText: {
        en: "Translated Text",
        zh: "翻译文本"
    },
    score: {
        en: "Score",
        zh: "分数"
    },
    selector: {
        en: "Selector",
        zh: "选择器"
    },
    keybind: {
        en: "Keybind",
        zh: "按键绑定"
    },
    nbt: {
        en: "NBT",
        zh: "NBT"
    },
    linebreak: {
        en: "Line Break",
        zh: "换行"
    },
    enterText: {
        en: "Enter text",
        zh: "输入文本"
    },
    enterTranslationKey: {
        en: "Enter translation key",
        zh: "输入翻译键"
    },
    enterScoreName: {
        en: "Enter score name",
        zh: "输入分数名称"
    },
    enterScoreObjective: {
        en: "Enter score objective",
        zh: "输入分数目标"
    },
    enterSelector: {
        en: "Enter selector",
        zh: "输入选择器"
    },
    enterKeybind: {
        en: "Enter keybind",
        zh: "输入按键绑定"
    },
    enterNbtPath: {
        en: "Enter NBT path",
        zh: "输入 NBT 路径"
    },
    entity: {
        en: "Entity",
        zh: "实体"
    },
    block: {
        en: "Block",
        zh: "方块"
    },
    storage: {
        en: "Storage",
        zh: "存储"
    },
    interpret: {
        en: "Interpret",
        zh: "解释"
    },
    noClickEvent: {
        en: "No Click Event",
        zh: "无点击事件"
    },
    open_url: {
        en: "Open URL",
        zh: "打开 URL"
    },
    open_file: {
        en: "Open File",
        zh: "打开文件"
    },
    run_command: {
        en: "Run Command",
        zh: "运行命令"
    },
    suggest_command: {
        en: "Suggest Command",
        zh: "建议命令"
    },
    change_page: {
        en: "Change Page",
        zh: "更改页面"
    },
    copy_to_clipboard: {
        en: "Copy to Clipboard",
        zh: "复制到剪贴板"
    },
    noHoverEvent: {
        en: "No Hover Event",
        zh: "无悬停事件"
    },
    show_text: {
        en: "Show Text",
        zh: "显示文本"
    },
    show_item: {
        en: "Show Item",
        zh: "显示物品"
    },
    show_entity: {
        en: "Show Entity",
        zh: "显示实体"
    },
    bold: {
        en: "Bold",
        zh: "粗体"
    },
    italic: {
        en: "Italic",
        zh: "斜体"
    },
    underlined: {
        en: "Underlined",
        zh: "下划线"
    },
    strikethrough: {
        en: "Strikethrough",
        zh: "删除线"
    },
    obfuscated: {
        en: "Obfuscated",
        zh: "模糊"
    },
    clickEvent: {
        en: "Click Event:",
        zh: "点击事件："
    },
    hoverEvent: {
        en: "Hover Event:",
        zh: "悬停事件："
    },
    moveUp: {
        en: "Move Up",
        zh: "上移"
    },
    moveDown: {
        en: "Move Down",
        zh: "下移"
    },
    duplicate: {
        en: "Duplicate",
        zh: "复制"
    },
    delete: {
        en: "Delete",
        zh: "删除"
    },
    contentLabel: {
        en: "Content {number} ({type})",
        zh: "内容 {number} ({type})"
    },
    black: {
        en: "Black",
        zh: "黑色"
    },
    dark_blue: {
        en: "Dark Blue",
        zh: "深蓝色"
    },
    dark_green: {
        en: "Dark Green",
        zh: "深绿色"
    },
    dark_aqua: {
        en: "Dark Aqua",
        zh: "深青色"
    },
    dark_red: {
        en: "Dark Red",
        zh: "深红色"
    },
    dark_purple: {
        en: "Dark Purple",
        zh: "深紫色"
    },
    gold: {
        en: "Gold",
        zh: "金色"
    },
    gray: {
        en: "Gray",
        zh: "灰色"
    },
    dark_gray: {
        en: "Dark Gray",
        zh: "深灰色"
    },
    blue: {
        en: "Blue",
        zh: "蓝色"
    },
    green: {
        en: "Green",
        zh: "绿色"
    },
    aqua: {
        en: "Aqua",
        zh: "青色"
    },
    red: {
        en: "Red",
        zh: "红色"
    },
    light_purple: {
        en: "Light Purple",
        zh: "淡紫色"
    },
    yellow: {
        en: "Yellow",
        zh: "黄色"
    },
    white: {
        en: "White",
        zh: "白色"
    },
    chatTitle: {
        en: "Chat",
        zh: "聊天"
    },
    sendButtonText: {
        en: "Send",
        zh: "发送"
    },
    typeAMessage: {
        en: "Type a message...",
        zh: "输入消息..."
    },
    chooseLoginMethod: {
        en: "Choose a Login Method",
        zh: "选择登录方式"
    },
    youtube: {
        en: "YouTube",
        zh: "YouTube"
    },
    instagram: {
        en: "Instagram",
        zh: "Instagram"
    },
    discord: {
        en: "Discord",
        zh: "Discord"
    },
    developedBy: {
        en: "Developed by nos",
        zh: "由 nos 开发"
    },
    donate: {
        en: "Donate",
        zh: "捐赠"
    },
    enterUsername: {
        en: "Please set your username:",
        zh: "请设置您的用户名："
    },
    usernameExists: {
        en: "Username already exists. Please choose another one.",
        zh: "用户名已存在。请选择另一个。"
    },
    loginWithGoogle: {
        en: "Login with Google",
        zh: "使用 Google 登录"
    },
    loginWithGithub: {
        en: "Login with GitHub",
        zh: "使用 GitHub 登录"
    },
    cancelLogin: {
        en: "Cancel",
        zh: "取消"
    },
    setUsernameTitle: {
        en: "Set Your Username",
        zh: "设置您的用户名"
    },
    setUsernameBtn: {
        en: "Set Username",
        zh: "设置用户名"
    },
    cancelSetUsername: {
        en: "Cancel",
        zh: "取消"
    },
    usernameEmpty: {
        en: "Username cannot be empty",
        zh: "用户名不能为空"
    },
    errorSavingUsername: {
        en: "Error saving username. Please try again.",
        zh: "保存用户名时出错。请重试。"
    },
    errorCheckingUsername: {
        en: "Error checking username. Please try again.",
        zh: "检查用户名时出错。请重试。"
    }
};

// Initialize the page
initializePage();
    </script>
</body>
</html>